# CI/CDの設計

ここで言うCI/CDは、以下のようなプロセスとして定義します。

1. コンテナ群が起動していたら終了をする
2. 単体テストの実行
3. コンテナ群のビルド
4. コンテナ群の起動
5. 結合テストの実行

## 基本ルールへの反映

`prompts/00_rules/00-000-FundamentalRules.md` に、コード生成の完了を示すルールとして、CI/CDプロセスの結合テストまでクリアすることを追記してください。
CI/CDプロセスが全て通らない限り、原因を特定し、コードを改善することを繰り返すことを追記してください。

## CI/CDプロセスの実行スクリプト

このプロセスを実行するために `./build.sh` を作成してください。
プロセスの各工程をスキップするためのオプションを追加してください。
オプションは、以下のようなものを考えてください。

- `--skip-tests`: 単体テストをスキップ
- `--skip-build`: コンテナ群のビルドをスキップ
- `--skip-start`: コンテナ群の起動をスキップ
- `--skip-test`: 結合テストをスキップ

これらのオプションは、不要な実行を避けることで、結果が出るまでの時間を短縮することが目的のオプションです。
決して、改善されないプロセスを無視するためのものではありません。
コード生成の完了を示すときは、最終的にオプションを指定せずに実行してください。
このルールについても、`prompts/00_rules/00-000-FundamentalRules.md` に追記してください。

## 単体テスト

原則として、Go言語のコード1ファイルについて、対応するように単体テストコードを作成してください。

- 例: `backend/internal/api/conversation.go` & `backend/internal/api/conversation_test.go`

## 結合テスト

結合テストは、`tests/` 以下のフォルダに Go言語で作成してください。

- `tests/integration/`: 
  - Web APIのテストや、Web UIのテストなどを行ってください。
- `tests/utils/`
  - テストに必要なユーティリティ関数を配置してください。

## テストに関する記述

`prompts/00_rules/00-000-FundamentalRules.md` に、テストに関する記述を追記してください。

