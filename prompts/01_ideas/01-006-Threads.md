# Threadの扱いを変更したい

## Assistant APIのThreadを共有しないようにする

現在のThread(セッション)は、チャットルームごとに1つという実装になっており、チャットルーム内のアバター全てがそれを共有しています。
この方法だと、アバター並列での処理が難しくなります。
従って、アバターが全て異なるThreadを持つように変更をしてください。

まず、ユーザとアバターA, アバターB, アバターC が存在している例を考えます。

1. ユーザが何か発言すると、アバターAのThreadとアバターBのThread, アバターCのThreadのそれぞれに、ユーザメッセージとして記録します。
2. アバターA, アバターB, アバターCがそれぞれのタイミングで、LLMを起動して、ユーザメッセージに対して反応をしたシステムメッセージを作ります。
3. 各アバターが作成したシステムメッセージは、ユーザにはGUIでアバターの発言として出力し、他のアバターに対しては、ユーザメッセージとして記録するようにします。
    - アバターAが作成したシステムメッセージは、アバターBのThreadと、アバターCのThreadに、ユーザメッセージとして記録します。
    - 同様に、アバターBが作成したシステムメッセージは、アバターAのThreadと、アバターCのThreadに、ユーザメッセージとして記録します。
    - アバターCも、アバターA, アバターBのThreadに、ユーザメッセージとして記録をします。

上記処理をする上で、SQLiteへ記録が必要であれば、データベース設計も適宜変更をしてください。

## LLMに渡すメッセージのログを確認する

ログに、LLMへのインプットを出力してほしい。
上記Threadの様子が分かるように、アバターの名前と、どのようなメッセージ内容を与えているのかを具体的に出力してほしい。
特に、`prompts\01_ideas\01-005-PromptImprovements.md` に記載したアバター毎のメッセージ処理が正しく行われているかをログからも確認できるようにしたい。
